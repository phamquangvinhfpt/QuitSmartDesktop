<UserControl x:Class="QuitSmartApp.Views.RegisterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ui="http://schemas.modernwpf.com/2019"
             xmlns:helpers="clr-namespace:QuitSmartApp.Helpers"
             mc:Ignorable="d"
             d:DesignHeight="700"
             d:DesignWidth="1000"
             Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}">

    <UserControl.Resources>
        <Style x:Key="FormTextBoxStyle"
               TargetType="TextBox">
            <Setter Property="Margin"
                    Value="0,0,0,16"/>
            <Setter Property="Padding"
                    Value="12,10"/>
            <Setter Property="FontSize"
                    Value="14"/>
        </Style>

        <Style x:Key="FormPasswordBoxStyle"
               TargetType="PasswordBox">
            <Setter Property="Margin"
                    Value="0,0,0,16"/>
            <Setter Property="Padding"
                    Value="12,10"/>
            <Setter Property="FontSize"
                    Value="14"/>
        </Style>

        <Style x:Key="FormLabelStyle"
               TargetType="TextBlock">
            <Setter Property="FontWeight"
                    Value="Medium"/>
            <Setter Property="Margin"
                    Value="0,0,0,8"/>
            <Setter Property="Foreground"
                    Value="{DynamicResource SystemControlPageTextBaseHighBrush}"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="450"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Panel - Decorative -->
        <Border Grid.Column="0"
                Background="ForestGreen">
            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <ui:FontIcon FontFamily="Segoe MDL2 Assets"
                             Glyph="&#xE908;"
                             FontSize="80"
                             Foreground="White"
                             Margin="0,0,0,24"/>
                <TextBlock Text="Bắt đầu hành trình"
                           FontSize="32"
                           FontWeight="Light"
                           Foreground="White"
                           Margin="0,0,0,16"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Tham gia cùng hàng nghìn người đã thành công cai thuốc lá"
                           FontSize="16"
                           Foreground="White"
                           TextWrapping="Wrap"
                           MaxWidth="300"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Register Form -->
        <ScrollViewer Grid.Column="1"
                      Margin="0,-21,0,0">
            <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                    Padding="40"
                    Margin="0,20"
                    Height="972">
                <StackPanel MaxWidth="370">
                    <!-- Header -->
                    <StackPanel HorizontalAlignment="Center"
                                Margin="0,0,0,32">
                        <TextBlock Text="Tạo tài khoản"
                                   FontSize="28"
                                   FontWeight="Light"
                                   Foreground="ForestGreen"
                                   Margin="0,0,0,8"/>
                        <TextBlock Text="Miễn phí và chỉ mất vài phút!"
                                   FontSize="14"
                                   Foreground="{DynamicResource SystemControlPageTextBaseHighBrush}"/>
                    </StackPanel>

                    <!-- Error Message -->
                    <TextBlock Text="{Binding ErrorMessage}"
                               Foreground="Crimson"
                               FontSize="14"
                               Margin="0,0,0,16"
                               TextWrapping="Wrap">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility"
                                        Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding ErrorMessage}"
                                                 Value="{x:Null}">
                                        <Setter Property="Visibility"
                                                Value="Collapsed"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding ErrorMessage}"
                                                 Value="">
                                        <Setter Property="Visibility"
                                                Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <!-- Registration Form -->
                    <StackPanel>
                        <TextBlock Text="Tên đăng nhập *"
                                   Style="{StaticResource FormLabelStyle}"/>
                        <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource FormTextBoxStyle}"
                                 ui:ControlHelper.PlaceholderText="Nhập tên đăng nhập"/>

                        <TextBlock Text="Email *"
                                   Style="{StaticResource FormLabelStyle}"/>
                        <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource FormTextBoxStyle}"
                                 ui:ControlHelper.PlaceholderText="Nhập địa chỉ email"/>

                        <TextBlock Text="Họ và tên *"
                                   Style="{StaticResource FormLabelStyle}"/>
                        <TextBox Text="{Binding FullName, UpdateSourceTrigger=PropertyChanged}"
                                 Style="{StaticResource FormTextBoxStyle}"
                                 ui:ControlHelper.PlaceholderText="Nhập họ và tên đầy đủ"/>

                        <TextBlock Text="Mật khẩu *"
                                   Style="{StaticResource FormLabelStyle}"/>
                        <PasswordBox x:Name="PasswordBox"
                                     Style="{StaticResource FormPasswordBoxStyle}"
                                     ui:ControlHelper.PlaceholderText="Ít nhất 6 ký tự"
                                     helpers:PasswordHelper.Attach="True"
                                     helpers:PasswordHelper.Password="{Binding Password, Mode=TwoWay}"/>

                        <TextBlock Text="Xác nhận mật khẩu *"
                                   Style="{StaticResource FormLabelStyle}"/>
                        <PasswordBox x:Name="ConfirmPasswordBox"
                                     Style="{StaticResource FormPasswordBoxStyle}"
                                     ui:ControlHelper.PlaceholderText="Nhập lại mật khẩu"
                                     helpers:PasswordHelper.Attach="True"
                                     helpers:PasswordHelper.Password="{Binding ConfirmPassword, Mode=TwoWay}"/>

                        <CheckBox IsChecked="{Binding AgreeToTerms}"
                                  Margin="0,0,0,24"
                                  FontSize="14">
                            <TextBlock TextWrapping="Wrap">
                                <Run Text="Tôi đồng ý với"/>
                                <ui:HyperlinkButton Content="Điều khoản sử dụng"
                                                    FontSize="14"
                                                    Padding="0"/>
                                <Run Text="và"/>
                                <ui:HyperlinkButton Content="Chính sách bảo mật"
                                                    FontSize="14"
                                                    Padding="0"/>
                            </TextBlock>
                        </CheckBox>

                        <Button Content="Tạo tài khoản"
                                Padding="0,12"
                                FontSize="16"
                                FontWeight="SemiBold"
                                Background="ForestGreen"
                                BorderBrush="ForestGreen"
                                Margin="0,0,0,24"
                                Cursor="Hand"
                                Command="{Binding RegisterCommand}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="IsEnabled"
                                            Value="True"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsLoading}"
                                                     Value="True">
                                            <Setter Property="IsEnabled"
                                                    Value="False"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>

                        <Border Height="1"
                                Background="{DynamicResource SystemControlForegroundBaseLowBrush}"
                                Margin="0,0,0,24"/>

                        <TextBlock Text="Đã có tài khoản?"
                                   HorizontalAlignment="Center"
                                   FontSize="14"
                                   Margin="0,0,0,8"/>
                        <Button Content="Đăng nhập ngay"
                                Background="Transparent"
                                BorderBrush="ForestGreen"
                                Foreground="ForestGreen"
                                Padding="24,8"
                                FontSize="14"
                                HorizontalAlignment="Center"
                                Cursor="Hand"
                                Command="{Binding NavigateToLoginCommand}"/>
                    </StackPanel>

                    <!-- Back to Welcome -->
                    <Button Content="← Quay về trang chủ"
                            HorizontalAlignment="Center"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="{DynamicResource SystemControlPageTextBaseHighBrush}"
                            FontSize="12"
                            Margin="0,24,0,0"
                            Cursor="Hand"
                            Command="{Binding NavigateToGuestCommand}"/>

                    <!-- Loading Indicator -->
                    <ui:ProgressRing IsActive="{Binding IsLoading}"
                                     Margin="0,16,0,0"
                                     HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </ScrollViewer>

        <!-- Right Panel - Benefits -->
        <Border Grid.Column="2"
                Background="DarkSeaGreen">
            <StackPanel VerticalAlignment="Center"
                        Margin="20">
                <ui:FontIcon FontFamily="Segoe MDL2 Assets"
                             Glyph="&#xE95E;"
                             FontSize="64"
                             Foreground="DarkSlateGray"
                             Margin="0,0,0,24"/>
                <TextBlock Text="Tại sao chọn QuitSmart?"
                           FontSize="20"
                           FontWeight="SemiBold"
                           Foreground="DarkSlateGray"
                           Margin="0,0,0,16"/>

                <StackPanel Margin="0,0,0,16">
                    <StackPanel Orientation="Horizontal"
                                Margin="0,0,0,8">
                        <ui:FontIcon FontFamily="Segoe MDL2 Assets"
                                     Glyph="&#xE73E;"
                                     FontSize="16"
                                     Foreground="DarkSlateGray"
                                     Margin="0,0,8,0"/>
                        <TextBlock Text="Theo dõi tiến trình chi tiết"
                                   FontSize="14"
                                   Foreground="DarkSlateGray"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal"
                                Margin="0,0,0,8">
                        <ui:FontIcon FontFamily="Segoe MDL2 Assets"
                                     Glyph="&#xE734;"
                                     FontSize="16"
                                     Foreground="DarkSlateGray"
                                     Margin="0,0,8,0"/>
                        <TextBlock Text="Huy hiệu thành tích"
                                   FontSize="14"
                                   Foreground="DarkSlateGray"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal"
                                Margin="0,0,0,8">
                        <ui:FontIcon FontFamily="Segoe MDL2 Assets"
                                     Glyph="&#xE8D3;"
                                     FontSize="16"
                                     Foreground="DarkSlateGray"
                                     Margin="0,0,8,0"/>
                        <TextBlock Text="Tính tiền tiết kiệm"
                                   FontSize="14"
                                   Foreground="DarkSlateGray"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <ui:FontIcon FontFamily="Segoe MDL2 Assets"
                                     Glyph="&#xE8C7;"
                                     FontSize="16"
                                     Foreground="DarkSlateGray"
                                     Margin="0,0,8,0"/>
                        <TextBlock Text="Động viên hàng ngày"
                                   FontSize="14"
                                   Foreground="DarkSlateGray"/>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
